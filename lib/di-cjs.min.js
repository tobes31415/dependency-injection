"use strict";var t;exports.__esModule=!0;var e=function(){function e(){this.instances=new Map,this.resolvers=new Map,this.useFactory=this.useFactory.bind(this),this.resolve=this.resolve.bind(this)}return e.prototype.useFactory=function(t,e){if(this.instances.has(t))throw new Error("This token has already been resolved");if(this.resolvers.has(t))throw new Error("A resolver has already been supplied for this token");if("function"!=typeof e)throw new Error("useFactory expects a function");this.resolvers.set(t,e)},e.prototype.useClass=function(t,e){var r=this;this.useFactory(t,function(){return r.resolve(e)})},e.prototype.useObject=function(t,e){this.useFactory(t,function(){return e})},e.prototype.resolve=function(e){var r=!t;try{if(r&&(t=this),t!==this)throw new Error("Cross Context resolution detected");if(!this.instances.has(e)){var o=(this.resolvers.get(e)||this.defaultResolver)(e);if(!o)throw new Error("Resolver didn't return an instance");this.instances.set(e,o)}return this.instances.get(e)}finally{r&&(t=void 0)}},e.prototype.defaultResolver=function(t){if("function"!=typeof t)throw new Error("Tokens must either be factory functions, or you must supply a resolver before trying to resolve them");return new t},e}(),r=new(function(){function r(){this.defaultRoot=new e}return r.prototype.useFactory=function(t,e){return this.context().useFactory(t,e)},r.prototype.useClass=function(t,e){return this.context().useClass(t,e)},r.prototype.useObject=function(t,e){return this.context().useObject(t,e)},r.prototype.resolve=function(t){return this.context().resolve(t)},r.prototype.context=function(){return t||this.defaultRoot},r}());exports.DI=r,exports.createRoot=function(){return new e},exports.default=r;