"use strict";var e;exports.__esModule=!0;var t=function(){function t(){this.instances=new Map,this.resolvers=new Map,this.useFactory=this.useFactory.bind(this),this.resolve=this.resolve.bind(this)}return t.prototype.useFactory=function(e,t){if(this.instances.has(e))throw new Error("This token has already been resolved");if(this.resolvers.has(e))throw new Error("A resolver has already been supplied for this token");if("function"!=typeof t)throw new Error("useFactory expects a function");this.resolvers.set(e,t)},t.prototype.useClass=function(e,t){var r=this;this.useFactory(e,function(){return r.resolve(t)})},t.prototype.useObject=function(e,t){this.useFactory(e,function(){return t})},t.prototype.resolve=function(t){var r=!e;try{if(r&&(e=this),e!==this)throw new Error("Cross Context resolution detected");if(!this.instances.has(t)){var s=(this.resolvers.get(t)||this.defaultResolver)(t);if(!s)throw new Error("Resolver didn't return an instance");this.instances.set(t,s)}return this.instances.get(t)}finally{r&&(e=void 0)}},t.prototype.defaultResolver=function(e){if("function"!=typeof e)throw new Error("Tokens must either be factory functions, or you must supply a resolver before trying to resolve them");return new e},t}(),r=new t;exports.DI=r,exports.createRoot=function(){return new t},exports.default=r;